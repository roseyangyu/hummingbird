#Custom rc startup script for FlightX Tailsitter

uorb start

set PARAM_FILE /fs/microsd/params
if mtd start
then
	set PARAM_FILE /fs/mtd_params
fi

param select $PARAM_FILE
if param load
then
else
	if param reset
	then
	fi
fi

# no safety switch
param set CBRK_IO_SAFETY 22027

#commander start
tsfmu start
sh /fs/microsd/etc/rc.sensors
mavlink start -r 800000 -d /dev/ttyACM0 -x
mavlink start -r 20000 -b 921600 -d /dev/ttyS0 -p 1
mavlink start -r 20000 -b 230400 -d /dev/ttyS2 -m vicon

sh /fs/microsd/etc/config.txt
mavlink boot_complete

